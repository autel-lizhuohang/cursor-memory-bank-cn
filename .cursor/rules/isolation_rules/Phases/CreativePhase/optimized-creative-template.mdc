---
description: 带有渐进式文档的优化创意阶段模板
globs: "**/creative*/**", "**/design*/**", "**/decision*/**"
alwaysApply: false
---

# 优化创意阶段模板

> **摘要：** 本模板为创意阶段实现渐进式文档方法，在保持全面设计探索的同时优化 token 使用。

## 📝 渐进式文档模型

```mermaid
graph TD
    Start["创意阶段开始"] --> P1["1️⃣ 问题<br>定义范围"]
    P1 --> P2["2️⃣ 选项<br>探索备选方案"]
    P2 --> P3["3️⃣ 分析<br>评估选定选项"]
    P3 --> P4["4️⃣ 决策<br>确定方案"]
    P4 --> P5["5️⃣ 实施<br>记录指南"]

    style Start fill:#d971ff,stroke:#a33bc2,color:white
    style P1 fill:#4da6ff,stroke:#0066cc,color:white
    style P2 fill:#ffa64d,stroke:#cc7a30,color:white
    style P3 fill:#4dbb5f,stroke:#36873f,color:white
    style P4 fill:#d94dbb,stroke:#a3378a,color:white
    style P5 fill:#4dbbbb,stroke:#368787,color:white
```

## 📋 模板结构

```markdown
📌 创意阶段开始：[组件名称]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1️⃣ 问题
   描述：[简要问题描述]
   需求：[关键需求要点]
   约束：[技术或业务约束]

2️⃣ 选项
   选项 A：[名称] - [一句话描述]
   选项 B：[名称] - [一句话描述]
   选项 C：[名称] - [一句话描述]

3️⃣ 分析
   | 标准 | 选项 A | 选项 B | 选项 C |
   |-----------|----------|----------|----------|
   | 性能 | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ |
   | 复杂度 | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
   | 可维护性 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |

   关键见解：
   - [见解 1]
   - [见解 2]

4️⃣ 决策
   选定：[选项 X]
   理由：[简要说明]

5️⃣ 实施说明
   - [实施说明 1]
   - [实施说明 2]
   - [实施说明 3]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 创意阶段结束
```

## 🧩 详细选项分析（按需）

可根据需要为选定的选项提供详细分析：

```markdown
<details>
  <summary>详细分析：选项 A</summary>

  ### 选项 A：[完整名称]

  **完整描述**：
  [该选项如何工作的详细描述]

  **优点**：
  - [优点 1 及说明]
  - [优点 2 及说明]
  - [优点 3 及说明]

  **缺点**：
  - [缺点 1 及说明]
  - [缺点 2 及说明]

  **实施复杂度**：[低/中/高]
  [复杂度因素说明]

  **资源需求**：
  [资源需求详情]

  **风险评估**：
  [风险分析]
</details>
```

## 📊 基于复杂度的扩展

模板根据任务复杂度级别自动调整文档要求：

### 级别 1-2（快速修复/增强）
- 简化的问题/解决方案
- 专注于实施
- 最小化选项探索

### 级别 3（功能开发）
- 需要多个选项
- 包含关键标准的分析表
- 实施指南

### 级别 4（企业级开发）
- 全面分析
- 考虑多个视角
- 详细的实施计划
- 扩展的验证标准

## ✅ 验证协议

质量验证压缩为简单的检查清单：

```markdown
验证：
[x] 问题定义清晰
[x] 已考虑多个选项
[x] 已做出决策并附有理由
[x] 已提供实施指南
```

## 🔄 使用示例

### 架构决策（级别 3）

```markdown
📌 创意阶段开始：认证系统
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1️⃣ 问题
   描述：为应用程序设计认证系统
   需求：安全、可扩展、支持 SSO、易于维护
   约束：必须与现有用户数据库配合使用，响应时间 <100ms

2️⃣ 选项
   选项 A：基于 JWT 的无状态认证 - 简单的基于令牌的方法
   选项 B：基于会话的 Redis 认证 - 服务器端会话存储
   选项 C：OAuth2 实现 - 委托授权框架

3️⃣ 分析
   | 标准 | JWT | 会话 | OAuth2 |
   |-----------|-----|----------|--------|
   | 安全性 | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
   | 可扩展性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
   | 复杂度 | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
   | 性能 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |

   关键见解：
   - JWT 提供最佳性能但撤销选项有限
   - 会话提供更好的安全控制但需要更多基础设施
   - OAuth2 最复杂但提供最佳集成可能性

4️⃣ 决策
   选定：选项 A：带刷新令牌的基于 JWT 的认证
   理由：在满足安全需求的同时，性能和可扩展性达到最佳平衡

5️⃣ 实施说明
   - 使用 HS256 算法进行令牌签名
   - 实现短期访问令牌（15分钟）配合较长期的刷新令牌（7天）
   - 在 Redis 中存储令牌黑名单以实现撤销功能
   - 在令牌端点添加速率限制

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 创意阶段结束
```

### 算法决策（级别 2）

```markdown
📌 创意阶段开始：搜索算法
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1️⃣ 问题
   描述：为产品目录实现高效的文本搜索
   需求：快速结果、支持部分匹配、不区分大小写
   约束：数据集 < 10,000 项，必须在浏览器环境中工作

2️⃣ 选项
   选项 A：简单正则搜索 - 基本模式匹配
   选项 B：基于 Trie 的搜索 - 前缀树结构
   选项 C：带 Levenshtein 的模糊搜索 - 编辑距离算法

3️⃣ 决策
   选定：选项 B：基于 Trie 的搜索
   理由：在可管理的内存使用下为前缀搜索提供最佳性能

4️⃣ 实施说明
   - 使用现有的 trie 库
   - 在索引期间将文本预处理为小写
   - 实现逐字母搜索以获得即时结果
   - 添加防抖（300ms）以防止过度重建

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 创意阶段结束
```

## 🏆 Token 效率优势

本模板通过以下方式显著减少 token 使用：

1. 专注于必要信息，避免不必要的冗长
2. 使用紧凑的表格格式进行比较
3. 为详细信息实现渐进式披露
4. 根据任务复杂度调整文档要求
5. 使用视觉指示器（表情符号）便于快速浏览

该模板在保持创意过程严谨性的同时，相比之前的格式提高了约 60% 的 token 效率。
